<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pose Letter Recognition (Tesseract OCR)</title>

<!-- p5.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.4/p5.min.js"></script>

<!-- MediaPipe Pose -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js" crossorigin="anonymous"></script>

<!-- Tesseract.js OCR -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<!-- Styles -->
<link rel="stylesheet" href="css/style.css" />
</head>
<body>

<div id="app-container">
  <!-- p5 injects canvas here -->
  <canvas id="ocr-preview" width="200" height="200"></canvas>

  <div class="hud">
    <div class="hud-top-bar">
      <span class="title">POSE → OCR</span>
      <span class="fps" id="fps-display">-- fps</span>
    </div>

    <!-- Recording tape -->
    <div id="rec-panel">
      <div id="rec-tape">
        <div id="rec-tape-label">
          <span>Recorded</span>
          <span id="rec-count">0 letters</span>
          <span class="rec-dot idle" id="rec-dot"></span>
        </div>
        <div id="rec-text"><span class="cursor"></span></div>
        <div id="rec-controls">
          <button class="rec-btn neutral" onclick="recSpace()">SPACE</button>
          <button class="rec-btn neutral" onclick="recBackspace()">⌫ DELETE</button>
          <button class="rec-btn action"  onclick="recCopy()">COPY</button>
          <button class="rec-btn danger"  onclick="recClear()">CLEAR</button>
        </div>
      </div>
    </div>

    <!-- Letter flash -->
    <div id="rec-flash"></div>

    <div class="hud-center">
      <div class="live-letter" id="live-letter"></div>
      <div class="big-letter" id="big-letter"></div>
      <div class="status-msg warn" id="msg-no-pose">Move into frame</div>
      <div class="status-msg load" id="msg-loading">Loading OCR engine…</div>
      <div class="status-msg info" id="msg-scanning">Scanning…</div>
    </div>

    <div class="hud-bottom">
      <div class="label-row">
        <span class="lbl">OCR Read</span>
        <span class="val" id="ocr-read-val">—</span>
      </div>
      <div class="label-row">
        <span class="lbl">Confidence</span>
        <span class="val" id="ocr-conf-val">—</span>
      </div>
      <div class="label-row">
        <span class="lbl">Confirmed</span>
        <span class="val" id="confirmed-val">—</span>
      </div>
      <div class="label-row" style="margin-top:2px">
        <span class="lbl">Stability</span>
        <span class="val" id="stability-val">0 / —</span>
      </div>
      <div class="progress-track">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
    </div>
  </div>
</div>

<!-- Scripts (Order matters for dependencies) -->
<script src="js/config.js"></script>
<script src="js/pose.js"></script>
<script src="js/ocr-engine.js"></script>
<script src="js/ocr-renderer.js"></script>
<script src="js/ui.js"></script>
<script src="js/main.js"></script>

</body>
</html>